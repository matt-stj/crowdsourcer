<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.8.9/jquery.timepicker.css"/ >
  <% include ../partials/head %>
</head>

<header>
  <% include ../partials/header %>
</header>

<main>
    <body class="center">
      <h1>Create a Poll</h1>

      <div class="container">
          <div class="row">
        <form action="/polls" method="POST" name="poll" class="col s6 offset-s3">
          <div class="row">
            <div class="input-field col s12">
              <input name="poll[title]" id="poll-title" type="text">
              <label for="poll[title]">Poll title</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <input name="poll[question]" id="question" type="text" >
              <label for="poll[question]">Poll Question</label>
            </div>
          </div>
          <div class="responses">
          <div class="row">
            <div class="input-field col s12">
              <input name="poll[responses][]" id="choice1" type="text" >
              <label for="poll[responses][]">Choice 1</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <input name="poll[responses][]" id="choice2" type="text">
              <label for="poll[responses][]">Choice 2</label>
            </div>
          </div>
        </div>
        <button type="button" name="add-choice" onClick="addItem()" class="btn-floating btn-small waves-effect waves-light green">
          +
        </button>
        <br>
            <div class="row">
              <div class="col s6">
                <label for="poll[expiresOn]">Expires on (optional)</label>
                <input type="date" name="poll[expiresOn]" id="datePicker" class="datepicker center center-align">
              </div>
              <div class="col s6">
                <label for="poll[expiresAt]">Expires at (optional)</label>
                <input type="text" name="poll[expiresAt]" id="timePicker" class="time ui-timepicker-input center center-align">
              </div>
            </div>
            <br>
            <div class="row">
            <div class="switch">
              <label for="poll[isPrivate]">Should the results of this poll be hidden from users?</label><br>
              <label>
                No
                <input type="checkbox" name="poll[isPrivate]" id="lever" value="true">
                <span class="lever"></span>
                Yes
              </label>
            </div>
          </div>
          <br>
          <button class="btn waves-effect waves-light" type="submit">Submit</button>
        </form>
      </div>
    </div>
      <% include ../partials/scripts %>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.8.9/jquery.timepicker.js"></script>
    </body>
    <br><br>
  </main>
  <footer>
    <% include ../partials/footer %>
    <script type="text/javascript">
    $( document ).ready(function() {
      $('#timePicker').timepicker({ 'scrollDefault': 'now' });
      $('#datepicker').pickadate()
    });
    var choiceNumber = 3
      function addItem(){
        $('.responses').append(
          `<div class="row">
            <div class="input-field col s12">
              <input name="poll[responses][]" id="choice${choiceNumber}" type="text">
              <label for="poll[responses][]">Choice ${choiceNumber}</label>
            </div>
          </div>`
        )
        choiceNumber++
      }
      // var input = document.getElementById('myInput');
      //
      // $('form').submit(function(){
      //     var input = $('#datePicker').val();
      //     if(input == ''){
      //          $('#datePicker').val("yyyy-MM-dd");
      //     }
      // });

    </script>
  </footer>


</html>
